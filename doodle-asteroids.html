<script>function ol(){M=Math,A=M.abs,C=M.cos,S=M.sin,T=M.atan2,B=[],P=[],W=a.width,H=a.height,c=a.getContext("2d"),s=0,n=2.6,ft=0,fc=0,f(73,13,8,"3d65e7"),f(59,5,6,"507bf2"),f(42,4,6,"5681f5"),f(27,9,6,"5683f7"),f(17,17,5,"4779f7"),f(10,27,6,"4577f6"),f(6,38,6,"3769f6"),f(6,49,6,"2a5cf4"),f(8,60,8,"2a59f0"),f(14,71,8,"2855ea"),f(25,82,8,"2650e1"),f(45,88,9,"1c48dd"),f(73,83,9,"3355d8"),f(78,67,8,"3059e3"),f(63,62,6,"6084ef"),f(123,32,6,"f0696c"),f(137,37,6,"e74653"),f(145,49,8,"d82038"),f(146,65,8,"c41731"),f(137,80,8,"cd4359"),f(117,83,8,"cf4055"),f(105,75,6,"cf2a3f"),f(100,65,6,"e02e3d"),f(97,56,6,"ee5257"),f(101,46,5,"ef5c5c"),f(108,36,6,"f4716e"),f(194,32,6,"fac652"),f(208,41,8,"f9b125"),f(214,59,9,"ef9a1e"),f(202,78,9,"ed9d33"),f(180,81,8,"eb9c31"),f(169,69,8,"efa11e"),f(166,55,6,"f7b326"),f(169,43,6,"f8c247"),f(178,34,6,"facb5e"),f(246,34,8,"5f8af8"),f(233,46,8,"4a7bf9"),f(235,62,9,"2e5def"),f(256,69,9,"4f7af2"),f(268,52,9,"2a56ea"),f(265,36,9,"4976f3"),f(256,81,6,"1d4eeb"),f(266,88,6,"2b58e8"),f(273,99,8,"2e55e2"),f(267,114,8,"4869e3"),f(248,120,8,"4167e4"),f(233,116,6,"3158e2"),f(226,108,5,"2552ea"),f(226,100,5,"4876f1"),f(232,93,5,"4b78f1"),f(244,88,6,"698bf1"),f(294,6,9,"36b641"),f(294,23,8,"10a11d"),f(294,41,8,"0b991a"),f(294,59,9,"1f9e2c"),f(300,78,9,"269230"),f(336,52,8,"eb676f"),f(353,42,8,"d53747"),f(343,32,6,"f16d6f"),f(327,35,6,"f47875"),f(319,46,6,"f36764"),f(318,58,6,"ec4147"),f(321,70,8,"de3646"),f(331,80,8,"ca273c"),f(348,83,9,"d44d61"),af()}function f(a,b,c,d){B.push({p:P.length,x:a*n,y:b*n,r:c*n,z:0,u:0,v:0,a:2,f:.8}),P.push({x:a*n,y:b*n,s:"#"+d})}function af(){for(t=Date.now()/1e3,c.clearRect(0,0,W,H),i=0;i<B.length;++i)b=B[i],b.p>=P.length&&(b.p=0),p=P[b.p],u=p.x-b.x,v=p.y-b.y,A(u)<8&&A(v)<8&&(b.p++,b.p>=P.length&&(b.p=0,b.x=P[0].x,b.y=P[0].y),p=P[b.p],u=p.x-b.x,v=p.y-b.y),u&&(b.z=T(v,u)),df(b),c.fillStyle=p.s,c.fillRect(b.x,b.y,b.r,b.r);if(s){for(t-q>=1&&(d.innerHTML="Asteroids! t="+~~(t-Q)+"s",q=t),i=0;i<R.length;++i)r=R[i],r.x+=r.u,r.y+=r.v,ec(r),c.strokeRect(r.x,r.y,r.r,r.r);for(m?(s.a=.2,u=X-s.x,v=Y-s.y,u&&(s.z=T(v,u)),t-s.t>.234&&(L.push({x:s.x+C(s.z)*s.r,y:s.y+S(s.z)*s.r,r:6,u:8*C(s.z),v:8*S(s.z)})>8&&L.shift(),s.t=t)):s.a=0,df(s),ec(s),c.save(),c.translate(s.x,s.y),c.rotate(s.z),c.beginPath(),c.moveTo(s.r,0),c.lineTo(-s.r,s.r),c.quadraticCurveTo(0,0,-s.r,-s.r),c.closePath(),c.stroke(),c.restore(),i=0;i<L.length;++i){for(l=L[i],l.x+=l.u,l.y+=l.v,ec(l),j=0;j<R.length;++j)r=R[j],r.x+r.r>l.x&&r.x<l.x+l.r&&r.y+r.r>l.y&&r.y<l.y+l.r&&(L.splice(i,1),B.push(R.splice(j,1)[0]));c.strokeRect(l.x,l.y,l.r,l.r)}R.length||(s=0,d.innerHTML="Your time was "+~~(10*(t-Q))/10+"s! (click) to play again")}t-ft>.99&&(g.innerHTML=fc+" fps",ft=t,fr=fc,fc=0),fc++,requestAnimationFrame(af)}function df(a){a.u+=C(a.z)*a.a,a.v+=S(a.z)*a.a,a.u*=a.f,a.v*=a.f,a.x+=a.u,a.y+=a.v}function ec(a){a.x<0&&(a.x=W),a.x>W&&(a.x=0),a.y<0&&(a.y=H),a.y>H&&(a.y=0)}function md(a){s||(R=B,B=[],L=[],q=(Q=t)-1,s={x:W/2,y:H/2,r:20,z:0,u:0,v:0,t:0,a:0,f:.99}),m=1,xy(a)}function mm(a){s&&m&&xy(a)}function xy(b){b.preventDefault(),b.touches?(x=b.touches[0].pageX,y=b.touches[0].pageY):(x=b.pageX,y=b.pageY),X=x-a.offsetLeft,Y=y-a.offsetTop}</script><body onload=ol() onmouseup=m=0 ontouchend=m=0><center><div style=font-family:sans-serif;color:gray><span id=g style=position:relative;left:480px>0 fps</span><span id=d>(click)</span></div><canvas width=960 height=360 id=a onmousedown=md(event) onmousemove=mm(event) ontouchstart=md(event) ontouchmove=mm(event)>     
